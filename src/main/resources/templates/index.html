<!DOCTYPE html>

<html lang="en" xmlns:th="https://www.thymeleaf.org">

<head>
    <title>Home</title>
    <meta content="Home" name="page">
    <placeholder th:replace="fragments/main.html :: head"></placeholder>
</head>

<body>

<header th:replace="fragments/main.html :: header"></header>

<div class="container">

    <h4>Hotel Overview</h4>

    <div class="section row">
        <div class="col s12">
            <ul class="collapsible popout">
                <li th:each="stay, iter: ${stays}">
                    <div class="collapsible-header">

                        <div class="float-left">

                            <h6 th:text="${stay.guest().firstName() + ' ' + stay.guest().lastName()}"></h6>

                            <div>
                                <span th:text="${{stay.checkIn}}"></span>
                                <span> until </span>
                                <span th:text="${{stay.expectedCheckOut}}"></span>
                            </div>
                        </div>

                        <div class="float-right valign-wrapper">
                            <a th:href="@{/invoice/billList(stayId=${stay.id}, organizationId=${stay.organizationId})}">
                                <div class="waves-effect waves-light waves-circle waves-teal center-align tooltipped disableClickThrow"
                                     data-position="top" data-tooltip="Create-Invoice">
                                    <i class="material-icons blue-grey-text no-margin center-context">receipt</i>
                                </div>
                            </a>
                            <form method="post" th:action="@{/checkOut/summary(stayId=${stay.id})}">
                                <button class="aToBtn waves-effect waves-light waves-circle waves-teal center-align tooltipped disableClickThrow"
                                        data-position="top"
                                        data-tooltip="Check-Out Summary" type="submit">
                                    <i class="material-icons blue-text no-margin center-context">logout</i>
                                </button>
                            </form>
                        </div>
                    </div>

                    <div class="collapsible-body s12">
                        <div class="row">
                            <div class="card col" style="margin-right: 10px" th:each="room: ${stay.rooms()}">
                                <p class="center-align" th:text="${room.id()}"></p>
                            </div>
                        </div>

                        <div class="row collapsible-row" th:object="${stay}">
                            <!-- representative data -->
                            <div class="col collapsible-col s4" th:object="${stay.representative}">
                                <h6>Representative</h6>
                                <p class="valign-wrapper">
                                    <i class="material-icons">account_circle</i>&nbsp
                                    <span th:text="*{firstName + ' ' + lastName}"></span>
                                </p>
                                <p class="valign-wrapper">
                                    <i class="material-icons">location_city</i>&nbsp
                                    <span th:text="*{address.street + ', ' + address.zip + ' ' + address.city + ', ' + address.country}"></span>
                                </p>
                                <p class="valign-wrapper">
                                    <i class="material-icons">euro_symbol</i>&nbsp
                                    <span th:text="*{paymentMethod}"></span>
                                </p>
                                <p class="valign-wrapper">
                                    <i class="material-icons">email</i>&nbsp
                                    <span th:text="*{email}"></span>
                                </p>
                                <p class="valign-wrapper">

                                    <i class="material-icons">phone</i>&nbsp
                                    <span th:text="*{phone}"></span>
                                </p>
                                <p class="valign-wrapper">
                                    <i class="material-icons">payment</i>&nbsp
                                    <span th:text="*{creditCardNumber}"></span>
                                </p>
                            </div>

                            <!-- guest data -->
                            <div class="col collapsible-col s4" th:object="${stay.guest}">
                                <h6>Guest</h6>
                                <p class="valign-wrapper">
                                    <i class="material-icons">account_circle</i>&nbsp
                                    <span th:text="*{firstName + ' ' + lastName}"></span>
                                </p>
                                <p class="valign-wrapper">
                                    <i class="material-icons">location_city</i>&nbsp
                                    <span th:text="*{address.street + ', ' + address.zip + ' ' + address.city + ', ' + address.country}"></span>
                                </p>
                            </div>

                            <!-- organization data -->
                            <div class="col collapsible-col s4" th:if="${organizations['__${iter.index}__'].id != ''}">
                                <h6>Organization</h6>
                                <p class="valign-wrapper">
                                    <i class="material-icons">group</i>&nbsp
                                    <span th:text="${organizations['__${iter.index}__'].organizationName}"></span>
                                </p>
                                <p class="valign-wrapper">
                                    <i class="material-icons">location_city</i>&nbsp
                                    <span th:text="${organizations['__${iter.index}__'].address.street + ', ' + organizations['__${iter.index}__'].address.zip + ' ' + organizations['__${iter.index}__'].address.city + ', ' + organizations['__${iter.index}__'].address.country}"></span>
                                </p>
                                <p class="valign-wrapper">
                                    <i class="material-icons">local_offer</i>&nbsp
                                    <span th:text="${organizations['__${iter.index}__'].discount} + ' %'"></span>
                                </p>
                            </div>
                        </div>
                    </div>
                </li>
            </ul>
        </div>
    </div>
</div>


<footer th:replace="fragments/main.html :: footer"></footer>

</body>
</html>